<mat-toolbar color="accent" class="top-bar mat-elevation-z4">
  <mat-toolbar-row style="display: flex; justify-content: space-between; align-items: center;">
    <span>Dove 🕊️ <small>({{ version }})</small></span>
    <button mat-flat-button color="primary" [disabled]="!osdData" (click)="downloadOsdAsCsv()" *ngIf="osdData">
      <mat-icon>download</mat-icon>
      <span>Export OSD data</span>
    </button>
  </mat-toolbar-row>
  <mat-progress-bar mode="indeterminate" style="position: absolute; bottom: 0;" *ngIf="loading"></mat-progress-bar>
</mat-toolbar>

<div class="content">
  <div class="map view">
    <app-map [osdData]="osdData" [osdStats]="osdStats" [sliderPosition]="sliderPosition"></app-map>
  </div>
  <div class="video view">
    <app-video [osdData]="osdData" [sliderPosition]="sliderPosition" [videoFileName]="videoFileName"></app-video>
  </div>
  <div class="ddd-player view">
    <app-ddd-view [osdData]="osdData" [osdStats]="osdStats" [sliderPosition]="sliderPosition"></app-ddd-view>
  </div>
  <div class="raw-data view">
    <app-raw-data [osdData]="osdData" [sliderPosition]="sliderPosition"></app-raw-data>
  </div>
</div>

<mat-toolbar color="accent" class="slider-bar mat-elevation-z4">
  <button mat-icon-button (click)="togglePlay()">
    <mat-icon>{{ recordPlaying ? 'pause' : 'play_arrow' }}</mat-icon>
  </button>
  <span class="time-text">{{ getCurrentTime() }}</span>
  <mat-slider min="0" [max]="osdData ? osdData.length - 1 : 0" step="1">
    <input matSliderThumb [(ngModel)]="sliderPosition">
  </mat-slider>
  <span class="time-text">{{ endText }}</span>
  <button mat-icon-button [matMenuTriggerFor]="playbackSpeedMenu" class="playback-speed-text">
    {{ playbackSpeeds[playbackSpeedIndex] }}x
  </button>
  <mat-menu #playbackSpeedMenu="matMenu">
    <button mat-menu-item (click)="changePlaybackSpeed(i)" *ngFor="let speed of playbackSpeeds; let i = index">
      <span>{{ speed }}</span>
    </button>
  </mat-menu>
</mat-toolbar>

<button mat-fab [extended]="!loading" color="primary" class="upload-button" (click)="openUploadSheet()" *ngIf="!(osdData && videoFileName)">
  <mat-spinner color="accent" diameter="20" *ngIf="loading"></mat-spinner>
  <mat-icon *ngIf="!loading">add</mat-icon>
  <span *ngIf="!loading">Add data</span>
</button>

<button mat-fab extended color="accent" class="upload-button" (click)="reset()" *ngIf="osdData && videoFileName">
  <mat-icon>refresh</mat-icon>
  Reset all
</button>